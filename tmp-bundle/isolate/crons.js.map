{
  "version": 3,
  "sources": ["../convex/crons.ts"],
  "sourcesContent": ["import { cronJobs } from 'convex/server';\r\nimport { api, internal } from './_generated/api';\r\n\r\nconst crons = cronJobs();\r\n\r\n// Run analytics sync every night at 2 AM UTC\r\ncrons.daily(\r\n  'analytics-sync',\r\n  { hourUTC: 2, minuteUTC: 0 },\r\n  api['analytics/scheduler'].syncAllProjects\r\n);\r\n\r\n// Clean up expired password reset tokens daily at 3 AM UTC\r\ncrons.daily(\r\n  'password-reset-token-cleanup',\r\n  { hourUTC: 3, minuteUTC: 0 },\r\n  internal.auth.passwordReset.cleanupExpiredTokens\r\n);\r\n\r\n// AI Provider health checks every 5 minutes\r\ncrons.interval(\r\n  'ai-provider-health-check',\r\n  { minutes: 5 },\r\n  internal.ai.health.healthActions.runHealthChecks\r\n);\r\n\r\n// Check circuit breaker timeouts every minute\r\ncrons.interval(\r\n  'ai-circuit-timeout-check',\r\n  { minutes: 1 },\r\n  internal.ai.health.healthActions.checkCircuitTimeouts\r\n);\r\n\r\n// Check grace period expiration daily at 4 AM UTC\r\n// Transitions expired grace_period subscriptions to maintenance_mode\r\ncrons.daily(\r\n  'subscription-grace-period-check',\r\n  { hourUTC: 4, minuteUTC: 0 },\r\n  internal.subscriptions.subscriptionLifecycle.checkGracePeriodExpiration\r\n);\r\n\r\n// Clean up expired impersonation sessions hourly\r\n// Marks active sessions past their expiry as expired\r\ncrons.hourly(\r\n  'impersonation-session-cleanup',\r\n  { minuteUTC: 15 }, // Run at 15 minutes past each hour\r\n  internal.admin.impersonation.cleanupExpiredSessions\r\n);\r\n\r\nexport default crons;\r\n"],
  "mappings": ";;;;;;;;;;;;AAAAA;AACAC;AAEA,IAAMC,IAAQC,EAAS;AAGvBD,EAAM;AAAA,EACJ;AAAA,EACA,EAAE,SAAS,GAAG,WAAW,EAAE;AAAA,EAC3BE,EAAI,qBAAqB,EAAE;AAC7B;AAGAF,EAAM;AAAA,EACJ;AAAA,EACA,EAAE,SAAS,GAAG,WAAW,EAAE;AAAA,EAC3BG,EAAS,KAAK,cAAc;AAC9B;AAGAH,EAAM;AAAA,EACJ;AAAA,EACA,EAAE,SAAS,EAAE;AAAA,EACbG,EAAS,GAAG,OAAO,cAAc;AACnC;AAGAH,EAAM;AAAA,EACJ;AAAA,EACA,EAAE,SAAS,EAAE;AAAA,EACbG,EAAS,GAAG,OAAO,cAAc;AACnC;AAIAH,EAAM;AAAA,EACJ;AAAA,EACA,EAAE,SAAS,GAAG,WAAW,EAAE;AAAA,EAC3BG,EAAS,cAAc,sBAAsB;AAC/C;AAIAH,EAAM;AAAA,EACJ;AAAA,EACA,EAAE,WAAW,GAAG;AAAA;AAAA,EAChBG,EAAS,MAAM,cAAc;AAC/B;AAEA,IAAOC,IAAQJ;",
  "names": ["init_server", "init_api", "crons", "cronJobs", "api", "internal", "crons_default"]
}
