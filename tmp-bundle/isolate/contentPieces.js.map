{
  "version": 3,
  "sources": ["../convex/contentPieces.ts"],
  "sourcesContent": ["/**\r\n * ContentPieces CRUD Operations\r\n *\r\n * Mutations and queries for the Content Studio.\r\n */\r\n\r\nimport { mutation, query } from './_generated/server';\r\nimport { paginationOptsValidator } from 'convex/server';\r\nimport { v } from 'convex/values';\r\nimport { auth } from './auth';\r\n\r\n// ============================================================================\r\n// Queries\r\n// ============================================================================\r\n\r\nexport const listByProject = query({\r\n  args: {\r\n    projectId: v.id('projects'),\r\n    status: v.optional(\r\n      v.union(\r\n        v.literal('generating'),\r\n        v.literal('draft'),\r\n        v.literal('approved'),\r\n        v.literal('published'),\r\n        v.literal('scheduled')\r\n      )\r\n    ),\r\n    limit: v.optional(v.number()),\r\n  },\r\n  handler: async (ctx, args) => {\r\n    const userId = await auth.getUserId(ctx);\r\n    if (!userId) return [];\r\n\r\n    let query = ctx.db\r\n      .query('contentPieces')\r\n      .withIndex('by_project', (q) => q.eq('projectId', args.projectId));\r\n\r\n    const pieces = await query.collect();\r\n\r\n    // Filter by status if provided\r\n    let filtered = pieces;\r\n    if (args.status) {\r\n      filtered = pieces.filter((p) => p.status === args.status);\r\n    }\r\n\r\n    // Sort by updatedAt desc\r\n    filtered.sort((a, b) => b.updatedAt - a.updatedAt);\r\n\r\n    // Apply limit\r\n    if (args.limit) {\r\n      filtered = filtered.slice(0, args.limit);\r\n    }\r\n\r\n    return filtered;\r\n  },\r\n});\r\n\r\n/**\r\n * Paginated version for infinite scroll in Content Library\r\n */\r\nexport const listByProjectPaginated = query({\r\n  args: {\r\n    projectId: v.id('projects'),\r\n    status: v.optional(\r\n      v.union(\r\n        v.literal('generating'),\r\n        v.literal('draft'),\r\n        v.literal('approved'),\r\n        v.literal('published'),\r\n        v.literal('scheduled')\r\n      )\r\n    ),\r\n    paginationOpts: paginationOptsValidator,\r\n  },\r\n  handler: async (ctx, args) => {\r\n    const userId = await auth.getUserId(ctx);\r\n    if (!userId) {\r\n      return { page: [], isDone: true, continueCursor: '' };\r\n    }\r\n\r\n    // Use index for efficient pagination\r\n    const result = await ctx.db\r\n      .query('contentPieces')\r\n      .withIndex('by_project_created', (q) => q.eq('projectId', args.projectId))\r\n      .order('desc')\r\n      .paginate(args.paginationOpts);\r\n\r\n    // Filter by status in-memory if specified\r\n    if (args.status) {\r\n      return {\r\n        ...result,\r\n        page: result.page.filter((p) => p.status === args.status),\r\n      };\r\n    }\r\n\r\n    return result;\r\n  },\r\n});\r\n\r\nexport const getById = query({\r\n  args: {\r\n    contentPieceId: v.id('contentPieces'),\r\n  },\r\n  handler: async (ctx, args) => {\r\n    const userId = await auth.getUserId(ctx);\r\n    if (!userId) return null;\r\n\r\n    return await ctx.db.get(args.contentPieceId);\r\n  },\r\n});\r\n\r\n/**\r\n * List content pieces by scheduled date for calendar view\r\n */\r\nexport const listByScheduledDate = query({\r\n  args: {\r\n    projectId: v.id('projects'),\r\n    startDate: v.optional(v.number()),\r\n    endDate: v.optional(v.number()),\r\n  },\r\n  handler: async (ctx, args) => {\r\n    const userId = await auth.getUserId(ctx);\r\n    if (!userId) return [];\r\n\r\n    // Get all pieces for project with scheduled dates\r\n    const pieces = await ctx.db\r\n      .query('contentPieces')\r\n      .withIndex('by_project_scheduled', (q) => q.eq('projectId', args.projectId))\r\n      .collect();\r\n\r\n    // Filter by date range if provided\r\n    let filtered = pieces.filter((p) => p.scheduledDate != null);\r\n\r\n    if (args.startDate) {\r\n      filtered = filtered.filter((p) => (p.scheduledDate ?? 0) >= args.startDate!);\r\n    }\r\n    if (args.endDate) {\r\n      filtered = filtered.filter((p) => (p.scheduledDate ?? 0) <= args.endDate!);\r\n    }\r\n\r\n    // Sort by scheduled date\r\n    filtered.sort((a, b) => (a.scheduledDate ?? 0) - (b.scheduledDate ?? 0));\r\n\r\n    return filtered;\r\n  },\r\n});\r\n\r\n// ============================================================================\r\n// Mutations\r\n// ============================================================================\r\n\r\nexport const create = mutation({\r\n  args: {\r\n    projectId: v.id('projects'),\r\n    contentType: v.union(\r\n      // Core Pages\r\n      v.literal('homepage'),\r\n      v.literal('about'),\r\n      v.literal('service'),\r\n      v.literal('landing'),\r\n      // Blog Content\r\n      v.literal('blog'),\r\n      v.literal('blogVersus'),\r\n      v.literal('blogVideo'),\r\n      v.literal('contentRefresh'),\r\n      // Conversion\r\n      v.literal('leadMagnet'),\r\n      v.literal('paidProduct'),\r\n      // Local/Geo\r\n      v.literal('areasWeServe'),\r\n      // Specialty\r\n      v.literal('employment'),\r\n      v.literal('mentorship'),\r\n      v.literal('donate'),\r\n      v.literal('events'),\r\n      v.literal('partner'),\r\n      v.literal('program')\r\n    ),\r\n    title: v.string(),\r\n    keywords: v.array(v.string()),\r\n    clusterId: v.optional(v.id('keywordClusters')),\r\n  },\r\n  handler: async (ctx, args) => {\r\n    const userId = await auth.getUserId(ctx);\r\n    if (!userId) throw new Error('Unauthorized');\r\n\r\n    // Verify project ownership\r\n    const project = await ctx.db.get(args.projectId);\r\n    if (!project || project.userId !== userId) {\r\n      throw new Error('Project not found');\r\n    }\r\n\r\n    const now = Date.now();\r\n\r\n    const id = await ctx.db.insert('contentPieces', {\r\n      projectId: args.projectId,\r\n      clusterId: args.clusterId,\r\n      contentType: args.contentType,\r\n      title: args.title,\r\n      h2Outline: [],\r\n      keywords: args.keywords,\r\n      status: 'generating',\r\n      createdAt: now,\r\n      updatedAt: now,\r\n    });\r\n\r\n    return id;\r\n  },\r\n});\r\n\r\nexport const update = mutation({\r\n  args: {\r\n    contentPieceId: v.id('contentPieces'),\r\n    title: v.optional(v.string()),\r\n    content: v.optional(v.string()),\r\n    h2Outline: v.optional(v.array(v.string())),\r\n    metaTitle: v.optional(v.string()),\r\n    metaDescription: v.optional(v.string()),\r\n    status: v.optional(\r\n      v.union(\r\n        v.literal('generating'),\r\n        v.literal('draft'),\r\n        v.literal('approved'),\r\n        v.literal('published'),\r\n        v.literal('scheduled')\r\n      )\r\n    ),\r\n    seoScore: v.optional(v.number()),\r\n    wordCount: v.optional(v.number()),\r\n  },\r\n  handler: async (ctx, args) => {\r\n    const userId = await auth.getUserId(ctx);\r\n    if (!userId) throw new Error('Unauthorized');\r\n\r\n    const piece = await ctx.db.get(args.contentPieceId);\r\n    if (!piece) throw new Error('Content not found');\r\n\r\n    // Verify project ownership\r\n    const project = await ctx.db.get(piece.projectId);\r\n    if (!project || project.userId !== userId) {\r\n      throw new Error('Unauthorized');\r\n    }\r\n\r\n    const { contentPieceId, ...updates } = args;\r\n    const filteredUpdates = Object.fromEntries(\r\n      Object.entries(updates).filter(([, v]) => v !== undefined)\r\n    );\r\n\r\n    await ctx.db.patch(contentPieceId, {\r\n      ...filteredUpdates,\r\n      updatedAt: Date.now(),\r\n    });\r\n\r\n    return contentPieceId;\r\n  },\r\n});\r\n\r\nexport const remove = mutation({\r\n  args: {\r\n    contentPieceId: v.id('contentPieces'),\r\n  },\r\n  handler: async (ctx, args) => {\r\n    const userId = await auth.getUserId(ctx);\r\n    if (!userId) throw new Error('Unauthorized');\r\n\r\n    const piece = await ctx.db.get(args.contentPieceId);\r\n    if (!piece) throw new Error('Content not found');\r\n\r\n    // Verify project ownership\r\n    const project = await ctx.db.get(piece.projectId);\r\n    if (!project || project.userId !== userId) {\r\n      throw new Error('Unauthorized');\r\n    }\r\n\r\n    await ctx.db.delete(args.contentPieceId);\r\n    return { success: true };\r\n  },\r\n});\r\n\r\n/**\r\n * Duplicate a content piece\r\n */\r\nexport const duplicate = mutation({\r\n  args: {\r\n    contentPieceId: v.id('contentPieces'),\r\n  },\r\n  handler: async (ctx, args) => {\r\n    const userId = await auth.getUserId(ctx);\r\n    if (!userId) throw new Error('Unauthorized');\r\n\r\n    const piece = await ctx.db.get(args.contentPieceId);\r\n    if (!piece) throw new Error('Content not found');\r\n\r\n    // Verify project ownership\r\n    const project = await ctx.db.get(piece.projectId);\r\n    if (!project || project.userId !== userId) {\r\n      throw new Error('Unauthorized');\r\n    }\r\n\r\n    const now = Date.now();\r\n\r\n    // Create duplicate with \"(Copy)\" suffix\r\n    const newId = await ctx.db.insert('contentPieces', {\r\n      projectId: piece.projectId,\r\n      clusterId: piece.clusterId,\r\n      contentType: piece.contentType,\r\n      title: `${piece.title} (Copy)`,\r\n      content: piece.content,\r\n      h2Outline: piece.h2Outline || [],\r\n      metaTitle: piece.metaTitle,\r\n      metaDescription: piece.metaDescription,\r\n      keywords: piece.keywords || [],\r\n      status: 'draft', // Always start as draft\r\n      seoScore: piece.seoScore,\r\n      wordCount: piece.wordCount,\r\n      createdAt: now,\r\n      updatedAt: now,\r\n    });\r\n\r\n    return newId;\r\n  },\r\n});\r\n\r\n// ============================================================================\r\n// Stats\r\n// ============================================================================\r\n\r\nexport const getStats = query({\r\n  args: {\r\n    projectId: v.id('projects'),\r\n  },\r\n  handler: async (ctx, args) => {\r\n    const userId = await auth.getUserId(ctx);\r\n    if (!userId) return null;\r\n\r\n    const pieces = await ctx.db\r\n      .query('contentPieces')\r\n      .withIndex('by_project', (q) => q.eq('projectId', args.projectId))\r\n      .collect();\r\n\r\n    const total = pieces.length;\r\n    const drafts = pieces.filter((p) => p.status === 'draft').length;\r\n    const approved = pieces.filter((p) => p.status === 'approved').length;\r\n    const published = pieces.filter((p) => p.status === 'published').length;\r\n    const scheduled = pieces.filter((p) => p.status === 'scheduled').length;\r\n\r\n    // Calculate average score\r\n    const scoredPieces = pieces.filter((p) => p.seoScore !== undefined);\r\n    const avgScore =\r\n      scoredPieces.length > 0\r\n        ? Math.round(\r\n            scoredPieces.reduce((sum, p) => sum + (p.seoScore ?? 0), 0) / scoredPieces.length\r\n          )\r\n        : null;\r\n\r\n    return {\r\n      total,\r\n      drafts,\r\n      approved,\r\n      published,\r\n      scheduled,\r\n      avgScore,\r\n    };\r\n  },\r\n});\r\n\r\n// ============================================================================\r\n// Calendar Integration\r\n// ============================================================================\r\n\r\n/**\r\n * Schedule content for future publishing\r\n */\r\nexport const schedule = mutation({\r\n  args: {\r\n    contentPieceId: v.id('contentPieces'),\r\n    publishDate: v.number(),\r\n  },\r\n  handler: async (ctx, args) => {\r\n    const userId = await auth.getUserId(ctx);\r\n    if (!userId) throw new Error('Unauthorized');\r\n\r\n    const piece = await ctx.db.get(args.contentPieceId);\r\n    if (!piece) throw new Error('Content not found');\r\n\r\n    // Verify project ownership\r\n    const project = await ctx.db.get(piece.projectId);\r\n    if (!project || project.userId !== userId) {\r\n      throw new Error('Unauthorized');\r\n    }\r\n\r\n    // Validate publish date is in the future\r\n    if (args.publishDate <= Date.now()) {\r\n      throw new Error('Publish date must be in the future');\r\n    }\r\n\r\n    await ctx.db.patch(args.contentPieceId, {\r\n      status: 'scheduled',\r\n      scheduledDate: args.publishDate, // Keep arg name if needed but map to schema field\r\n      updatedAt: Date.now(),\r\n    });\r\n\r\n    return { success: true, publishDate: args.publishDate };\r\n  },\r\n});\r\n\r\n/**\r\n * List scheduled content (for calendar view)\r\n */\r\nexport const listScheduled = query({\r\n  args: {\r\n    projectId: v.id('projects'),\r\n    startDate: v.optional(v.number()),\r\n    endDate: v.optional(v.number()),\r\n  },\r\n  handler: async (ctx, args) => {\r\n    const userId = await auth.getUserId(ctx);\r\n    if (!userId) return [];\r\n\r\n    const pieces = await ctx.db\r\n      .query('contentPieces')\r\n      .withIndex('by_project', (q) => q.eq('projectId', args.projectId))\r\n      .collect();\r\n\r\n    // Filter for scheduled status\r\n    let scheduled = pieces.filter((p) => p.status === 'scheduled' && p.scheduledDate);\r\n\r\n    // Filter by date range if provided\r\n    if (args.startDate) {\r\n      scheduled = scheduled.filter((p) => (p.scheduledDate ?? 0) >= (args.startDate ?? 0));\r\n    }\r\n    if (args.endDate) {\r\n      scheduled = scheduled.filter((p) => (p.scheduledDate ?? 0) <= (args.endDate ?? 0));\r\n    }\r\n\r\n    // Sort by scheduled date ascending\r\n    scheduled.sort((a, b) => (a.scheduledDate ?? 0) - (b.scheduledDate ?? 0));\r\n\r\n    return scheduled;\r\n  },\r\n});\r\n\r\n/**\r\n * Unschedule content (revert to draft)\r\n */\r\nexport const unschedule = mutation({\r\n  args: {\r\n    contentPieceId: v.id('contentPieces'),\r\n  },\r\n  handler: async (ctx, args) => {\r\n    const userId = await auth.getUserId(ctx);\r\n    if (!userId) throw new Error('Unauthorized');\r\n\r\n    const piece = await ctx.db.get(args.contentPieceId);\r\n    if (!piece) throw new Error('Content not found');\r\n\r\n    // Verify project ownership\r\n    const project = await ctx.db.get(piece.projectId);\r\n    if (!project || project.userId !== userId) {\r\n      throw new Error('Unauthorized');\r\n    }\r\n\r\n    await ctx.db.patch(args.contentPieceId, {\r\n      status: 'draft',\r\n      scheduledDate: undefined,\r\n      updatedAt: Date.now(),\r\n    });\r\n\r\n    return { success: true };\r\n  },\r\n});\r\n"],
  "mappings": "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",
  "names": ["init_server", "init_values", "listByProject", "query", "v", "__name", "ctx", "args", "auth", "pieces", "q", "filtered", "p", "b", "listByProjectPaginated", "paginationOptsValidator", "result", "getById", "listByScheduledDate", "a", "create", "mutation", "userId", "project", "now", "update", "piece", "contentPieceId", "updates", "filteredUpdates", "remove", "duplicate", "getStats", "total", "drafts", "approved", "published", "scheduled", "scoredPieces", "avgScore", "sum", "schedule", "listScheduled", "unschedule"]
}
