{
  "version": 3,
  "sources": ["../convex/cache.ts"],
  "sourcesContent": ["import { components } from \"./_generated/api\";\r\n\r\n// Cache TTLs in milliseconds\r\nexport const CACHE_TTL = {\r\n  BRIEF_GENERATION: 7 * 24 * 60 * 60 * 1000, // 7 days\r\n  DRAFT_GENERATION: 3 * 24 * 60 * 60 * 1000, // 3 days\r\n  KEYWORD_CLUSTERING: 30 * 24 * 60 * 60 * 1000, // 30 days\r\n  SERP_ANALYSIS: 24 * 60 * 60 * 1000, // 24 hours\r\n  QUARTERLY_PLANNING: 7 * 24 * 60 * 60 * 1000, // 7 days\r\n} as const;\r\n\r\nexport const cache = {\r\n  get: async (ctx: any, key: string) => {\r\n    const result = await ctx.runQuery(components.actionCache.lib.get, {\r\n      name: \"manual_cache\",\r\n      args: key,\r\n      ttl: null,\r\n    });\r\n    if (result.kind === \"hit\") {\r\n      return result.value;\r\n    }\r\n    return null;\r\n  },\r\n  set: async (ctx: any, key: string, value: any, ttl: number) => {\r\n    await ctx.runMutation(components.actionCache.lib.put, {\r\n      name: \"manual_cache\",\r\n      args: key,\r\n      value,\r\n      ttl,\r\n    });\r\n  },\r\n};\r\n\r\n// Helper to generate cache keys\r\nexport function getCacheKey(operation: string, params: Record<string, any>): string {\r\n  const sortedParams = Object.keys(params)\r\n    .sort()\r\n    .reduce((acc, key) => {\r\n      acc[key] = params[key];\r\n      return acc;\r\n    }, {} as Record<string, any>);\r\n  \r\n  return `${operation}:${JSON.stringify(sortedParams)}`;\r\n}"],
  "mappings": ";;;;;;;;;;AAAAA;AAGO,IAAMC,IAAY;AAAA,EACvB,kBAAkB,QAAc,KAAK;AAAA;AAAA,EACrC,kBAAkB,OAAc,KAAK;AAAA;AAAA,EACrC,oBAAoB,MAAU,KAAK,KAAK;AAAA;AAAA,EACxC,eAAe,OAAU,KAAK;AAAA;AAAA,EAC9B,oBAAoB,QAAc,KAAK;AAAA;AACzC,GAEaC,IAAQ;AAAA,EACnB,KAAK,gBAAAC,EAAA,OAAOC,GAAUC,MAAgB;AACpC,QAAMC,IAAS,MAAMF,EAAI,SAASG,EAAW,YAAY,IAAI,KAAK;AAAA,MAChE,MAAM;AAAA,MACN,MAAMF;AAAA,MACN,KAAK;AAAA,IACP,CAAC;AACD,WAAIC,EAAO,SAAS,QACXA,EAAO,QAET;AAAA,EACT,GAVK;AAAA,EAWL,KAAK,gBAAAH,EAAA,OAAOC,GAAUC,GAAaG,GAAYC,MAAgB;AAC7D,UAAML,EAAI,YAAYG,EAAW,YAAY,IAAI,KAAK;AAAA,MACpD,MAAM;AAAA,MACN,MAAMF;AAAA,MACN,OAAAG;AAAA,MACA,KAAAC;AAAA,IACF,CAAC;AAAA,EACH,GAPK;AAQP;AAGO,SAASC,EAAYC,GAAmBC,GAAqC;AAClF,MAAMC,IAAe,OAAO,KAAKD,CAAM,EACpC,KAAK,EACL,OAAO,CAACE,GAAKT,OACZS,EAAIT,CAAG,IAAIO,EAAOP,CAAG,GACdS,IACN,CAAC,CAAwB;AAE9B,SAAO,GAAGH,CAAS,IAAI,KAAK,UAAUE,CAAY,CAAC;AACrD;AATgBV,EAAAO,GAAA;",
  "names": ["init_api", "CACHE_TTL", "cache", "__name", "ctx", "key", "result", "components", "value", "ttl", "getCacheKey", "operation", "params", "sortedParams", "acc"]
}
