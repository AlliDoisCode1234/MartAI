{
  "version": 3,
  "sources": ["../convex/strategy.ts"],
  "sourcesContent": ["import { query } from './_generated/server';\r\nimport { v } from 'convex/values';\r\n\r\n/**\r\n * Strategy Queries\r\n *\r\n * Provides strategy-related data for the Insights page.\r\n * TODO: Implement full strategy logic with real data aggregation.\r\n */\r\n\r\n/**\r\n * Get full strategy data for a project.\r\n * Returns keyword counts, content stats, and strategy metadata.\r\n */\r\nexport const getFullStrategy = query({\r\n  args: {\r\n    projectId: v.id('projects'),\r\n  },\r\n  handler: async (ctx, args) => {\r\n    // Get project\r\n    const project = await ctx.db.get(args.projectId);\r\n    if (!project) {\r\n      return null;\r\n    }\r\n\r\n    // Count keywords for this project\r\n    const keywords = await ctx.db\r\n      .query('keywords')\r\n      .filter((q) => q.eq(q.field('projectId'), args.projectId))\r\n      .collect();\r\n\r\n    // Count content pieces\r\n    const briefs = await ctx.db\r\n      .query('contentPieces')\r\n      .filter((q) => q.eq(q.field('projectId'), args.projectId))\r\n      .collect();\r\n\r\n    // Count topic clusters\r\n    const clusters = await ctx.db\r\n      .query('keywordClusters')\r\n      .filter((q) => q.eq(q.field('projectId'), args.projectId))\r\n      .collect();\r\n\r\n    return {\r\n      projectId: args.projectId,\r\n      projectName: project.name,\r\n      stats: {\r\n        keywordCount: keywords.length,\r\n        briefCount: briefs.length,\r\n        clusterCount: clusters.length,\r\n        publishedCount: briefs.filter((b) => b.status === 'published').length,\r\n        draftCount: briefs.filter((b) => b.status === 'draft').length,\r\n      },\r\n      lastUpdated: Date.now(),\r\n    };\r\n  },\r\n});\r\n"],
  "mappings": ";;;;;;;;;;;;AACAA;AAaO,IAAMC,IAAkBC,EAAM;AAAA,EACnC,MAAM;AAAA,IACJ,WAAWC,EAAE,GAAG,UAAU;AAAA,EAC5B;AAAA,EACA,SAAS,gBAAAC,EAAA,OAAOC,GAAKC,MAAS;AAE5B,QAAMC,IAAU,MAAMF,EAAI,GAAG,IAAIC,EAAK,SAAS;AAC/C,QAAI,CAACC;AACH,aAAO;AAIT,QAAMC,IAAW,MAAMH,EAAI,GACxB,MAAM,UAAU,EAChB,OAAO,CAACI,MAAMA,EAAE,GAAGA,EAAE,MAAM,WAAW,GAAGH,EAAK,SAAS,CAAC,EACxD,QAAQ,GAGLI,IAAS,MAAML,EAAI,GACtB,MAAM,eAAe,EACrB,OAAO,CAACI,MAAMA,EAAE,GAAGA,EAAE,MAAM,WAAW,GAAGH,EAAK,SAAS,CAAC,EACxD,QAAQ,GAGLK,IAAW,MAAMN,EAAI,GACxB,MAAM,iBAAiB,EACvB,OAAO,CAACI,MAAMA,EAAE,GAAGA,EAAE,MAAM,WAAW,GAAGH,EAAK,SAAS,CAAC,EACxD,QAAQ;AAEX,WAAO;AAAA,MACL,WAAWA,EAAK;AAAA,MAChB,aAAaC,EAAQ;AAAA,MACrB,OAAO;AAAA,QACL,cAAcC,EAAS;AAAA,QACvB,YAAYE,EAAO;AAAA,QACnB,cAAcC,EAAS;AAAA,QACvB,gBAAgBD,EAAO,OAAO,CAACE,MAAMA,EAAE,WAAW,WAAW,EAAE;AAAA,QAC/D,YAAYF,EAAO,OAAO,CAACE,MAAMA,EAAE,WAAW,OAAO,EAAE;AAAA,MACzD;AAAA,MACA,aAAa,KAAK,IAAI;AAAA,IACxB;AAAA,EACF,GArCS;AAsCX,CAAC;",
  "names": ["init_values", "getFullStrategy", "query", "v", "__name", "ctx", "args", "project", "keywords", "q", "briefs", "clusters", "b"]
}
